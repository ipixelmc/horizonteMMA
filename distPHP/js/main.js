function Institute(t){console.log(t),this.id=t.id?t.id:null,this.name=t.name?t.name:"",this.disciplines=t.disciplines?t.disciplines:[],this.lat=t.lat?t.lat:0,this.lng=t.lng?t.lng:0,this.address=t.address?t.address:"",this.images=t.images?t.images:[],this.disciplinesObj=t.disciplinesObj?t.disciplinesObj:[],this.infoWindow=null,this.show=!0,this.phone=t.phone?t.phone:"",this.webPage=t.webPage?t.webPage:"",this.logo=t.logo,this.show=!0,this.distance=t.distance?t.distance:0,this.showByDiscipline=!0,this.showByLocation=!0,this.showByDistance=!0,this.logo=t.logo,0!=this.lat&&0!=this.lng&&(this.point=[this.lat,this.lng]),Institute.prototype.update=function(t){_.assignIn(this,t)}}function Distance(t){this.max=t.max?t.max:0,this.min=t.min?t.min:0,this.status=!!t.status&&t.status}!function(){"use strict";angular.module("horizonteMMAModule",["ngTouch","angular-carousel","rzModule","ngMap"])}(),function(){"use strict";function t(t){var n=!1,i={discipline:n?"/data/discipline.json":"http://localhost:8888/hmma/wp-json/wp/v2/disciplinas"},e=n?"/data/institutes.json":"http://localhost:8888/hmma/wp-json/wp/v2/academias",s=function(t){console.log("Ha ocurrido un error en la petición"),console.log(t)},o=function(n){t({method:"GET",url:n.url}).then(function(t){n.model(t.data)},function(t){s(t)})},a={getDisciplines:function(t){o({url:i.discipline,model:t})},getInstitutes:function(t){o({url:e,model:t})}};return a}angular.module("horizonteMMAModule").service("DataService",t),t.$inject=["$http"]}(),function(){"use strict";function t(t){function n(t){return t*(Math.PI/180)}var i="AIzaSyD5JToX3gMDJdSG_CX1UmTPx5TIVZTuso8",e="https://maps.googleapis.com/maps/api/geocode/json?address=STRING&components=country:MX&key=API_KEY",s=new Distance({}),o=new Object({}),a=new Object,c=function(t){var i=6371e3,e=n(o.lat),a=n(t.lat),c=n(t.lat-o.lat),r=n(t.lng-o.lng),l=Math.sin(c/2)*Math.sin(c/2)+Math.cos(e)*Math.cos(a)*Math.sin(r/2)*Math.sin(r/2),u=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),d=Math.ceil(i*u);return t.innerRange&&(s.max=d>s.max?d:s.max,s.min=0==s.min||d<s.min?d:s.min),d},r={calculateDistance:function(t){return c(t)},resetRange:function(){s.max=0,s.min=0,s.status=!1},getDistanceMax:function(){return s.max},getDistanceMin:function(){return s.min},getDistanceRange:function(){return s},setFinalCalculate:function(t){s.status=t},setUserPoint:function(t){a.lat=t.lat,a.lng=t.lng},getUserPoint:function(){return a},setOriginPoint:function(t){o.lat=t.lat,o.lng=t.lng},getOriginPoint:function(){return o},searchPlace:function(n,s,o){var a="";a=e.replace("API_KEY",i),a=a.replace("STRING",n),t({method:"GET",url:a}).then(function(t){s(t.data)},function(t){o(t)})}};return r}angular.module("horizonteMMAModule").service("MapService",t),t.$inject=["$http"]}(),function(){"use strict";function t(t,n){var i={institutes:new Array(0),disciplines:new Array(0),instituteSelected:new Institute({}),filters:{discipline:new Object,activeDistance:new Boolean((!1)),distance:0}},e=function(t){var e=t.length-1;_.forEach(t,function(t,s){var o=new Array;_.forEach(t.disciplines,function(t,n){var e=_.find(i.disciplines,function(n){return n.id==t});e&&o.push(e)}),t.disciplinesObj=o,t.distance=n.calculateDistance({lat:t.lat,lng:t.lng,innerRange:!0}),i.institutes.push(new Institute(t)),s==e&&n.setFinalCalculate(!0)})},s=function(t){t.textAll&&t.assignData.push({id:-1,name:t.textAll}),angular.forEach(t.list,function(n,i){t.assignData.push(n)}),t.assignFirst&&(t.assignFirst.id=t.assignData[0].id,t.assignFirst.name=t.assignData[0].name)},o=function(){t.getDisciplines(function(t){s({list:t,assignData:i.disciplines,textAll:"Todas las disciplinas",assignFirst:i.filters.discipline})})};o();var a=function(){t.getInstitutes(function(t){e(t)})};a();var c={getDisciplines:function(t){return i.disciplines},getInstitutes:function(){return i.institutes},getFilters:function(){return i.filters},getInstitudeSelected:function(){return i.instituteSelected},getActiveDistance:function(t){return i.filters.activeDistance},calculateDistance:function(){n.resetRange(),_.forEach(i.institutes,function(t,e){t.distance=n.calculateDistance({lat:t.lat,lng:t.lng,innerRange:t.showByLocation}),e==i.institutes.length-1&&n.setFinalCalculate(!0)})},changeInstitutes:function(){i.institutes[0].show=!1,i.institutes[3].show=!1}};return c}angular.module("horizonteMMAModule").factory("ModelService",t),t.$inject=["DataService","MapService"]}(),function(){"use strict";function t(){}angular.module("horizonteMMAModule").controller("MainController",t),t.$inject=[]}(),function(){"use strict";function t(t,n,i,e){var s=this;s.model={};var o=function(){s.disciplines=t.getDisciplines(),s.model=t.getFilters(),s.distanceRange=n.getDistanceRange(),s.institutes=t.getInstitutes(),s.userPoint=n.getUserPoint(),s.showDetailed=!1};s.initSlider=function(){s.distance=s.distanceRange.max,s.model.distance=s.distance,s.sliderOptions={floor:0,ceil:s.distanceRange.max,showSelectionBar:!0,step:s.distance/10,onChange:function(){s.model.distance=s.distance,a()}},e(function(){i.$broadcast("rzSliderForceRender")})};var a=function(){_.forEach(s.institutes,function(t){t.distance<=s.distance?_.set(t,"showByDistance",!0):_.set(t,"showByDistance",!1)})};s.activateDistance=function(){1==s.activeDistance?(s.initSlider(),s.model.activeDistance=!0,a()):(s.model.activeDistance=!1,_.forEach(s.institutes,function(t){_.set(t,"showByDistance",!0)}))},s.places={},s.places.show=!1,s.applyFilterPlace=!1,s.getShowInstitutes=function(){return _.filter(s.institutes,function(t){return t.showByDiscipline&&t.showByLocation&&t.showByDistance}).lenght},s.searchPlaces=function(){""!=s.txtLocation?(n.searchPlace(s.txtLocation,function(t){s.places.show=!0,s.places.list=t.results},function(t){console.log(t),s.messageErrorSearch="Ocurrió un error al búscar lugares cercanos"}),s.applyFilterPlace=!0):(s.applyFilterPlace=!1,s.model.changeLocation=!s.model.changeLocation,s.places.show=!1,_.forEach(s.institutes,function(t){_.set(t,"showByLocation",!0)}),c(s.userPoint),s.activeDistance=!1,s.activateDistance())},s.filterByDiscipline=function(){s.model.discipline.id>0?_.forEach(s.institutes,function(t){var n=_.find(t.disciplinesObj,function(t){return s.model.discipline.id==t.id});n?_.set(t,"showByDiscipline",!0):_.set(t,"showByDiscipline",!1)}):_.forEach(s.institutes,function(t){_.set(t,"showByDiscipline",!0)})},s.filterByLocation=function(){if(s.locationSelected.formatted_address){s.txtLocation=s.locationSelected.formatted_address;var t=s.locationSelected.geometry.bounds,n=new google.maps.LatLngBounds(t.southwest,t.northeast);_.forEach(s.institutes,function(t){n.contains({lat:t.lat,lng:t.lng})?_.set(t,"showByLocation",!0):_.set(t,"showByLocation",!1)})}else _.forEach(s.institutes,function(t){_.set(t,"showByLocation",!0)})};var c=function(t){n.setOriginPoint(t)};s.setPlace=function(n){console.log("aplicando"),s.locationSelected=n,c(s.locationSelected.geometry.location),s.filterByLocation(),t.calculateDistance(),s.activateDistance()},s.resetLocation=function(){s.txtLocation="",s.searchPlaces()},s.resetDistance=function(){s.activeDistance=!1,s.activateDistance()},s.resetDiscipline=function(){s.model.discipline=s.disciplines[0],s.filterByDiscipline()},o()}angular.module("horizonteMMAModule").controller("FiltersController",t),t.$inject=["ModelService","MapService","$scope","$timeout"]}(),function(){"use strict";function t(t,n,i,e){var s=this;s.userPoint,s.originPoint,s.centerCountry={lat:19.4326077,lng:-99.1332071};e.getMap().then(function(t){s.map=t});var o=function(){s.institutes=t.getInstitutes(),s.institudeSelected=t.getInstitudeSelected(),s.filters=t.getFilters(),s.userPoint=i.getUserPoint(),s.originPoint=i.getOriginPoint();var e=s.centerCountry;navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){e={lat:t.coords.latitude,lng:t.coords.longitude},a(e)},function(t){console.log(t),a(s.centerCountry)}),n.$watch("ctrl.filters",function(t,n){c()},!0)},a=function(n){e.getMap().then(function(t){var i=new google.maps.LatLng(n.lat,n.lng);t.setCenter(i),t.setZoom(11)}),i.setOriginPoint(n),i.setUserPoint(n),t.calculateDistance()};s.setUserPotition=function(){a(s.userPoint)};var c=function(){if(s.map){s.map.hideInfoWindow("infoinstitute");for(var t in s.map.customMarkers){var n=parseInt(t.replace("marker_","")),i=_.find(s.institutes,function(t){return t.id==n});i&&(i.showByDiscipline&&i.showByDistance&&i.showByLocation?s.map.customMarkers[t].setMap(s.map):s.map.customMarkers[t].setMap(null))}}};s.showInfoWindow=function(t,n){s.ins=s.institutes[n],s.map.showInfoWindow("infoinstitute","marker_"+s.ins.id)},o()}angular.module("horizonteMMAModule").controller("MapController",t),t.$inject=["ModelService","$scope","MapService","NgMap"]}(),function(){"use strict";function t(t,n){var i=this;i.hoverNew=0,i.tamMax=5,i.showButtonMore=!0;var e=function(){i.institutes=t.getInstitutes(),i.filters=t.getFilters()};i.changeHover=function(t){i.hoverOld=i.hoverNew,i.hoverNew=t,i.institutes[i.hoverOld].inHover=!1,i.institutes[i.hoverNew].inHover=!0},i.resetScroll=function(){i.tamMax=5,i.showButtonMore=i.tamMax<i.institutes.length},i.showMoreFn=function(){i.tamMax+=5,i.showButtonMore=i.tamMax<i.institutes.length},i.listFilterFn=function(t,n){var e=t.showByDiscipline&&t.showByLocation&&t.showByDistance;return!!(e&&n<i.tamMax)},e()}angular.module("horizonteMMAModule").controller("ListController",t),t.$inject=["ModelService","tokilometersFilter"]}(),function(t){"use strict";t.module("horizonteMMAModule").filter("tokilometers",function(){return function(t){return Math.round(.001*t*10)/10+" km"}})}(window.angular);